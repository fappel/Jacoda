import { __read, __assign, __awaiter, __generator, __spread, __values } from 'tslib';
import { Injectable, EventEmitter, Inject, InjectionToken, Optional, NgModule, Pipe, defineInjectable, inject } from '@angular/core';
import { HttpClient, HttpClientModule } from '@angular/common/http';
import { Title } from '@angular/platform-browser';
import { Subject } from 'rxjs';
import { CommonModule } from '@angular/common';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
var TRANSLATE_SETTINGS = new InjectionToken('TRANSLATE_SETTINGS');
var TranslateService = /** @class */ (function () {
    function TranslateService(http, settings) {
        this.http = http;
        this.data = {};
        this._fallbackLang = 'en';
        this._translationRoot = 'assets/i18n';
        /**
         * Raised each time active language gets changed.
         */
        this.activeLangChanged = new EventEmitter();
        /**
         * Toggles debug mode.
         *
         * When in the debug mode, the service automatically prepends active language id to very translated result.
         * That allows to verify that your components support i18n correctly and do not contain hard-coded text.
         */
        this.debugMode = false;
        /**
         * Disable caching and always download language files.
         *
         * Applies cache busting query parameters to urls, for example: '?v=1522426955882'.
         */
        this.disableCache = false;
        /**
         * List of supported languages.
         *
         * The service will attempt to load resource files only for given set of languages,
         * and will automatically use fallback language for all unspecified values.
         *
         * By default this property is empty and service is going to probe all language files.
         * Active and Fallback languages are always taken into account even if you do not specify them in the list.
         */
        this.supportedLangs = [];
        /**
         * List of extra paths to look for translation files.
         *
         * By default this property is empty.
         * The value of `translationRoot` property is always taken into account.
         */
        this.translatePaths = [];
        this.applySettings(settings);
    }
    Object.defineProperty(TranslateService.prototype, "fallbackLang", {
        /**
         * The fallback language to use when a resource string for the active language is not available.
         */
        get: /**
         * The fallback language to use when a resource string for the active language is not available.
         * @return {?}
         */
        function () {
            return this._fallbackLang;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._fallbackLang = value || 'en';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TranslateService.prototype, "activeLang", {
        /**
         * The language to use for the translations.
         */
        get: /**
         * The language to use for the translations.
         * @return {?}
         */
        function () {
            return this._activeLang;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            var _this = this;
            /** @type {?} */
            var previousValue = this._activeLang;
            /** @type {?} */
            var newValue = value || this.fallbackLang;
            /** @type {?} */
            var changed = newValue !== previousValue;
            if (changed) {
                this._activeLang = newValue;
                this.use(newValue).then(function () {
                    _this.activeLangChanged.next({
                        previousValue: previousValue,
                        currentValue: newValue
                    });
                });
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    TranslateService.prototype.getBrowserLanguage = /**
     * @return {?}
     */
    function () {
        var _a = __read(navigator.language
            .replace('-', '_')
            .toLowerCase()
            .split('_'), 1), lang = _a[0] /*, locale*/;
        return lang;
    };
    Object.defineProperty(TranslateService.prototype, "translationRoot", {
        /**
         * The root path to use when loading default translation files.
         * Defaults to 'assets/i18n'.
         */
        get: /**
         * The root path to use when loading default translation files.
         * Defaults to 'assets/i18n'.
         * @return {?}
         */
        function () {
            return this._translationRoot;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._translationRoot = value || 'assets/i18n';
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} settings
     * @return {?}
     */
    TranslateService.prototype.applySettings = /**
     * @param {?} settings
     * @return {?}
     */
    function (settings) {
        var _a = this, debugMode = _a.debugMode, disableCache = _a.disableCache, supportedLangs = _a.supportedLangs, translatePaths = _a.translatePaths, translationRoot = _a.translationRoot, activeLang = _a.activeLang;
        /** @type {?} */
        var defaults = __assign({ debugMode: debugMode,
            disableCache: disableCache,
            supportedLangs: supportedLangs,
            translatePaths: translatePaths,
            translationRoot: translationRoot,
            activeLang: activeLang }, settings);
        this.debugMode = defaults.debugMode;
        this.disableCache = defaults.disableCache;
        this.supportedLangs = defaults.supportedLangs;
        this.translatePaths = defaults.translatePaths;
        this.translationRoot = defaults.translationRoot;
        this._activeLang = defaults.activeLang || this.getBrowserLanguage();
    };
    /**
     * Get translated string
     *
     * @param key Translation key
     * @param [params] Translation parameters
     * @param [lang] Language to use for translation
     * @returns Translated string
     * @memberof TranslateService
     */
    /**
     * Get translated string
     *
     * \@memberof TranslateService
     * @param {?} key Translation key
     * @param {?=} params
     * @param {?=} lang
     * @return {?} Translated string
     */
    TranslateService.prototype.get = /**
     * Get translated string
     *
     * \@memberof TranslateService
     * @param {?} key Translation key
     * @param {?=} params
     * @param {?=} lang
     * @return {?} Translated string
     */
    function (key, params, lang) {
        if (key) {
            /** @type {?} */
            var value = this.getValue(lang || this.activeLang, key);
            if (value === key) {
                value = this.getValue(this.fallbackLang, key);
            }
            return this.format(value, params);
        }
        else {
            return null;
        }
    };
    /**
     * @return {?}
     */
    TranslateService.prototype.load = /**
     * @return {?}
     */
    function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.use(this.fallbackLang)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, this.use(this.activeLang)];
                }
            });
        });
    };
    /**
     * Load the translation file or use provided data for the given language.
     *
     * @param lang Language name
     * @param [data] Translation data to use
     * @returns Final translation data merged with existing translations
     * @memberof TranslateService
     */
    /**
     * Load the translation file or use provided data for the given language.
     *
     * \@memberof TranslateService
     * @param {?} lang Language name
     * @param {?=} data
     * @return {?} Final translation data merged with existing translations
     */
    TranslateService.prototype.use = /**
     * Load the translation file or use provided data for the given language.
     *
     * \@memberof TranslateService
     * @param {?} lang Language name
     * @param {?=} data
     * @return {?} Final translation data merged with existing translations
     */
    function (lang, data) {
        return __awaiter(this, void 0, void 0, function () {
            var e_1, _a, translation, fileName, filePaths, filePaths_1, filePaths_1_1, path, filePath, e_1_1;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (lang && data) {
                            return [2 /*return*/, this.setTranslation(lang, data)];
                        }
                        translation = this.data[lang];
                        if (this.isNotSupported(lang)) {
                            translation = this.data[this.fallbackLang];
                        }
                        if (translation && Object.keys(translation).length > 0) {
                            return [2 /*return*/, translation];
                        }
                        fileName = (lang || this.fallbackLang) + ".json";
                        filePaths = __spread([this.translationRoot], (this.translatePaths || []));
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 6, 7, 8]);
                        filePaths_1 = __values(filePaths), filePaths_1_1 = filePaths_1.next();
                        _b.label = 2;
                    case 2:
                        if (!!filePaths_1_1.done) return [3 /*break*/, 5];
                        path = filePaths_1_1.value;
                        filePath = path + "/" + fileName;
                        return [4 /*yield*/, this.loadTranslation(lang, filePath)];
                    case 3:
                        _b.sent();
                        _b.label = 4;
                    case 4:
                        filePaths_1_1 = filePaths_1.next();
                        return [3 /*break*/, 2];
                    case 5: return [3 /*break*/, 8];
                    case 6:
                        e_1_1 = _b.sent();
                        e_1 = { error: e_1_1 };
                        return [3 /*break*/, 8];
                    case 7:
                        try {
                            if (filePaths_1_1 && !filePaths_1_1.done && (_a = filePaths_1.return)) _a.call(filePaths_1);
                        }
                        finally { if (e_1) throw e_1.error; }
                        return [7 /*endfinally*/];
                    case 8: return [2 /*return*/, this.data[lang] || {}];
                }
            });
        });
    };
    /**
     * @param {?} lang
     * @param {?} path
     * @return {?}
     */
    TranslateService.prototype.loadTranslation = /**
     * @param {?} lang
     * @param {?} path
     * @return {?}
     */
    function (lang, path) {
        var _this = this;
        return new Promise(function (resolve) {
            if (_this.disableCache) {
                path += "?v=" + Date.now();
            }
            _this.http.get(path).subscribe(function (json) {
                resolve(_this.setTranslation(lang, json));
            }, function () {
                resolve(_this.data[lang] || {});
            });
        });
    };
    /**
     * @param {?} lang
     * @return {?}
     */
    TranslateService.prototype.isNotSupported = /**
     * @param {?} lang
     * @return {?}
     */
    function (lang) {
        return (lang !== this.fallbackLang &&
            lang !== this.activeLang &&
            (this.supportedLangs &&
                this.supportedLangs.length > 0 &&
                !this.supportedLangs.includes(lang)));
    };
    /**
     * @param {?} lang
     * @param {?} key
     * @return {?}
     */
    TranslateService.prototype.getValue = /**
     * @param {?} lang
     * @param {?} key
     * @return {?}
     */
    function (lang, key) {
        /** @type {?} */
        var data = this.data[lang];
        if (this.isNotSupported(lang)) {
            data = this.data[this.fallbackLang];
        }
        if (!data) {
            return key;
        }
        /** @type {?} */
        var keys = key.split('.');
        /** @type {?} */
        var propKey = '';
        do {
            propKey += keys.shift();
            /** @type {?} */
            var value = data[propKey];
            if (value !== undefined && (typeof value === 'object' || !keys.length)) {
                data = value;
                propKey = '';
            }
            else if (!keys.length) {
                data = key;
            }
            else {
                propKey += '.';
            }
        } while (keys.length);
        return data;
    };
    /**
     * @param {?} lang
     * @param {?} data
     * @return {?}
     */
    TranslateService.prototype.setTranslation = /**
     * @param {?} lang
     * @param {?} data
     * @return {?}
     */
    function (lang, data) {
        /** @type {?} */
        var finalResult = this.data[lang] || {};
        finalResult = this.merge(finalResult, data || {});
        this.data[lang] = finalResult;
        return finalResult;
    };
    /**
     * @param {...?} translations
     * @return {?}
     */
    TranslateService.prototype.merge = /**
     * @param {...?} translations
     * @return {?}
     */
    function () {
        var _this = this;
        var translations = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            translations[_i] = arguments[_i];
        }
        /** @type {?} */
        var result = {};
        translations.forEach(function (translation) {
            Object.keys(translation).forEach(function (key) {
                if (key in result && Array.isArray(result[key])) {
                    result[key] = result[key].concat(translation[key]);
                }
                else if (key in result && typeof result[key] === 'object') {
                    result[key] = _this.merge(result[key], translation[key]);
                }
                else {
                    result[key] = translation[key];
                }
            });
        });
        return result;
    };
    /**
     * @param {?} str
     * @param {?} params
     * @return {?}
     */
    TranslateService.prototype.format = /**
     * @param {?} str
     * @param {?} params
     * @return {?}
     */
    function (str, params) {
        /** @type {?} */
        var result = str;
        if (params) {
            Object.keys(params).forEach(function (key) {
                /** @type {?} */
                var value = params[key];
                /** @type {?} */
                var template = new RegExp('{' + key + '}', 'gm');
                result = result.replace(template, value);
            });
        }
        if (this.debugMode) {
            result = "[" + this.activeLang + "] " + result;
        }
        return result;
    };
    TranslateService.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    TranslateService.ctorParameters = function () { return [
        { type: HttpClient },
        { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [TRANSLATE_SETTINGS,] }] }
    ]; };
    /** @nocollapse */ TranslateService.ngInjectableDef = defineInjectable({ factory: function TranslateService_Factory() { return new TranslateService(inject(HttpClient), inject(TRANSLATE_SETTINGS, 8)); }, token: TranslateService, providedIn: "root" });
    return TranslateService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var TitleService = /** @class */ (function () {
    function TitleService(title, translate) {
        var _this = this;
        this.title = title;
        this.translate = translate;
        this._titleKey = '';
        this.changed = new Subject();
        translate.activeLangChanged.subscribe(function () { return _this.onLanguageChanged(); });
    }
    /**
     * @return {?}
     */
    TitleService.prototype.getTitle = /**
     * @return {?}
     */
    function () {
        return this._titleKey;
    };
    /**
     * @param {?} key
     * @return {?}
     */
    TitleService.prototype.setTitle = /**
     * @param {?} key
     * @return {?}
     */
    function (key) {
        /** @type {?} */
        var previousValue = this._titleKey;
        /** @type {?} */
        var newValue = key || '';
        /** @type {?} */
        var changed = newValue !== previousValue;
        if (changed) {
            this._titleKey = newValue;
            /** @type {?} */
            var translated = this.translate.get(newValue);
            this.title.setTitle(translated);
            this.changed.next({
                previousValue: previousValue,
                currentValue: newValue
            });
        }
    };
    /**
     * @return {?}
     */
    TitleService.prototype.onLanguageChanged = /**
     * @return {?}
     */
    function () {
        if (this._titleKey) {
            /** @type {?} */
            var translated = this.translate.get(this._titleKey);
            this.title.setTitle(translated);
        }
    };
    TitleService.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    TitleService.ctorParameters = function () { return [
        { type: Title },
        { type: TranslateService }
    ]; };
    /** @nocollapse */ TitleService.ngInjectableDef = defineInjectable({ factory: function TitleService_Factory() { return new TitleService(inject(Title), inject(TranslateService)); }, token: TitleService, providedIn: "root" });
    return TitleService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var TranslatePipe = /** @class */ (function () {
    function TranslatePipe(translate) {
        this.translate = translate;
    }
    /**
     * @param {?} key
     * @param {?=} params
     * @return {?}
     */
    TranslatePipe.prototype.transform = /**
     * @param {?} key
     * @param {?=} params
     * @return {?}
     */
    function (key, params) {
        return this.translate.get(key, params);
    };
    TranslatePipe.decorators = [
        { type: Pipe, args: [{
                    name: 'translate',
                    pure: false
                },] }
    ];
    /** @nocollapse */
    TranslatePipe.ctorParameters = function () { return [
        { type: TranslateService }
    ]; };
    return TranslatePipe;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var TranslateModule = /** @class */ (function () {
    function TranslateModule() {
    }
    /**
     * @param {?=} settings
     * @return {?}
     */
    TranslateModule.forRoot = /**
     * @param {?=} settings
     * @return {?}
     */
    function (settings) {
        return {
            ngModule: TranslateModule,
            providers: [
                { provide: TRANSLATE_SETTINGS, useValue: settings },
                TranslateService,
                TitleService
            ]
        };
    };
    /**
     * @return {?}
     */
    TranslateModule.forChild = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: TranslateModule
        };
    };
    TranslateModule.decorators = [
        { type: NgModule, args: [{
                    imports: [CommonModule, HttpClientModule],
                    declarations: [TranslatePipe],
                    exports: [TranslatePipe]
                },] }
    ];
    return TranslateModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

export { TRANSLATE_SETTINGS, TranslateService, TitleService, TranslatePipe, TranslateModule };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmdzdGFjay10cmFuc2xhdGUuanMubWFwIiwic291cmNlcyI6WyJuZzovL0BuZ3N0YWNrL3RyYW5zbGF0ZS9saWIvdHJhbnNsYXRlLnNlcnZpY2UudHMiLCJuZzovL0BuZ3N0YWNrL3RyYW5zbGF0ZS9saWIvdGl0bGUuc2VydmljZS50cyIsIm5nOi8vQG5nc3RhY2svdHJhbnNsYXRlL2xpYi90cmFuc2xhdGUucGlwZS50cyIsIm5nOi8vQG5nc3RhY2svdHJhbnNsYXRlL2xpYi90cmFuc2xhdGUubW9kdWxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEluamVjdGFibGUsXG4gIEV2ZW50RW1pdHRlcixcbiAgSW5qZWN0LFxuICBJbmplY3Rpb25Ub2tlbixcbiAgT3B0aW9uYWxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBIdHRwQ2xpZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgVHJhbnNsYXRlU2V0dGluZ3MgfSBmcm9tICcuL3RyYW5zbGF0ZS5zZXR0aW5ncyc7XG5cbmV4cG9ydCBjb25zdCBUUkFOU0xBVEVfU0VUVElOR1MgPSBuZXcgSW5qZWN0aW9uVG9rZW48VHJhbnNsYXRlU2V0dGluZ3M+KFxuICAnVFJBTlNMQVRFX1NFVFRJTkdTJ1xuKTtcblxuZXhwb3J0IGludGVyZmFjZSBUcmFuc2xhdGVQYXJhbXMge1xuICBba2V5OiBzdHJpbmddOiBzdHJpbmc7XG59XG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIFRyYW5zbGF0ZVNlcnZpY2Uge1xuICBwcm90ZWN0ZWQgZGF0YTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSA9IHt9O1xuICBwcml2YXRlIF9mYWxsYmFja0xhbmcgPSAnZW4nO1xuICBwcml2YXRlIF9hY3RpdmVMYW5nO1xuICBwcml2YXRlIF90cmFuc2xhdGlvblJvb3QgPSAnYXNzZXRzL2kxOG4nO1xuXG4gIC8qKlxuICAgKiBSYWlzZWQgZWFjaCB0aW1lIGFjdGl2ZSBsYW5ndWFnZSBnZXRzIGNoYW5nZWQuXG4gICAqL1xuICBhY3RpdmVMYW5nQ2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXI8e1xuICAgIHByZXZpb3VzVmFsdWU6IHN0cmluZztcbiAgICBjdXJyZW50VmFsdWU6IHN0cmluZztcbiAgfT4oKTtcblxuICAvKipcbiAgICogVG9nZ2xlcyBkZWJ1ZyBtb2RlLlxuICAgKlxuICAgKiBXaGVuIGluIHRoZSBkZWJ1ZyBtb2RlLCB0aGUgc2VydmljZSBhdXRvbWF0aWNhbGx5IHByZXBlbmRzIGFjdGl2ZSBsYW5ndWFnZSBpZCB0byB2ZXJ5IHRyYW5zbGF0ZWQgcmVzdWx0LlxuICAgKiBUaGF0IGFsbG93cyB0byB2ZXJpZnkgdGhhdCB5b3VyIGNvbXBvbmVudHMgc3VwcG9ydCBpMThuIGNvcnJlY3RseSBhbmQgZG8gbm90IGNvbnRhaW4gaGFyZC1jb2RlZCB0ZXh0LlxuICAgKi9cbiAgZGVidWdNb2RlID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIERpc2FibGUgY2FjaGluZyBhbmQgYWx3YXlzIGRvd25sb2FkIGxhbmd1YWdlIGZpbGVzLlxuICAgKlxuICAgKiBBcHBsaWVzIGNhY2hlIGJ1c3RpbmcgcXVlcnkgcGFyYW1ldGVycyB0byB1cmxzLCBmb3IgZXhhbXBsZTogJz92PTE1MjI0MjY5NTU4ODInLlxuICAgKi9cbiAgZGlzYWJsZUNhY2hlID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIExpc3Qgb2Ygc3VwcG9ydGVkIGxhbmd1YWdlcy5cbiAgICpcbiAgICogVGhlIHNlcnZpY2Ugd2lsbCBhdHRlbXB0IHRvIGxvYWQgcmVzb3VyY2UgZmlsZXMgb25seSBmb3IgZ2l2ZW4gc2V0IG9mIGxhbmd1YWdlcyxcbiAgICogYW5kIHdpbGwgYXV0b21hdGljYWxseSB1c2UgZmFsbGJhY2sgbGFuZ3VhZ2UgZm9yIGFsbCB1bnNwZWNpZmllZCB2YWx1ZXMuXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQgdGhpcyBwcm9wZXJ0eSBpcyBlbXB0eSBhbmQgc2VydmljZSBpcyBnb2luZyB0byBwcm9iZSBhbGwgbGFuZ3VhZ2UgZmlsZXMuXG4gICAqIEFjdGl2ZSBhbmQgRmFsbGJhY2sgbGFuZ3VhZ2VzIGFyZSBhbHdheXMgdGFrZW4gaW50byBhY2NvdW50IGV2ZW4gaWYgeW91IGRvIG5vdCBzcGVjaWZ5IHRoZW0gaW4gdGhlIGxpc3QuXG4gICAqL1xuICBzdXBwb3J0ZWRMYW5nczogc3RyaW5nW10gPSBbXTtcblxuICAvKipcbiAgICogTGlzdCBvZiBleHRyYSBwYXRocyB0byBsb29rIGZvciB0cmFuc2xhdGlvbiBmaWxlcy5cbiAgICpcbiAgICogQnkgZGVmYXVsdCB0aGlzIHByb3BlcnR5IGlzIGVtcHR5LlxuICAgKiBUaGUgdmFsdWUgb2YgYHRyYW5zbGF0aW9uUm9vdGAgcHJvcGVydHkgaXMgYWx3YXlzIHRha2VuIGludG8gYWNjb3VudC5cbiAgICovXG4gIHRyYW5zbGF0ZVBhdGhzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIC8qKlxuICAgKiBUaGUgZmFsbGJhY2sgbGFuZ3VhZ2UgdG8gdXNlIHdoZW4gYSByZXNvdXJjZSBzdHJpbmcgZm9yIHRoZSBhY3RpdmUgbGFuZ3VhZ2UgaXMgbm90IGF2YWlsYWJsZS5cbiAgICovXG4gIGdldCBmYWxsYmFja0xhbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fZmFsbGJhY2tMYW5nO1xuICB9XG5cbiAgc2V0IGZhbGxiYWNrTGFuZyh2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5fZmFsbGJhY2tMYW5nID0gdmFsdWUgfHwgJ2VuJztcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgbGFuZ3VhZ2UgdG8gdXNlIGZvciB0aGUgdHJhbnNsYXRpb25zLlxuICAgKi9cbiAgZ2V0IGFjdGl2ZUxhbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fYWN0aXZlTGFuZztcbiAgfVxuXG4gIHNldCBhY3RpdmVMYW5nKHZhbHVlOiBzdHJpbmcpIHtcbiAgICBjb25zdCBwcmV2aW91c1ZhbHVlID0gdGhpcy5fYWN0aXZlTGFuZztcbiAgICBjb25zdCBuZXdWYWx1ZSA9IHZhbHVlIHx8IHRoaXMuZmFsbGJhY2tMYW5nO1xuICAgIGNvbnN0IGNoYW5nZWQgPSBuZXdWYWx1ZSAhPT0gcHJldmlvdXNWYWx1ZTtcblxuICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICB0aGlzLl9hY3RpdmVMYW5nID0gbmV3VmFsdWU7XG4gICAgICB0aGlzLnVzZShuZXdWYWx1ZSkudGhlbigoKSA9PiB7XG4gICAgICAgIHRoaXMuYWN0aXZlTGFuZ0NoYW5nZWQubmV4dCh7XG4gICAgICAgICAgcHJldmlvdXNWYWx1ZTogcHJldmlvdXNWYWx1ZSxcbiAgICAgICAgICBjdXJyZW50VmFsdWU6IG5ld1ZhbHVlXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0QnJvd3Nlckxhbmd1YWdlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgW2xhbmcgLyosIGxvY2FsZSovXSA9IG5hdmlnYXRvci5sYW5ndWFnZVxuICAgICAgLnJlcGxhY2UoJy0nLCAnXycpXG4gICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgLnNwbGl0KCdfJyk7XG4gICAgcmV0dXJuIGxhbmc7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHJvb3QgcGF0aCB0byB1c2Ugd2hlbiBsb2FkaW5nIGRlZmF1bHQgdHJhbnNsYXRpb24gZmlsZXMuXG4gICAqIERlZmF1bHRzIHRvICdhc3NldHMvaTE4bicuXG4gICAqL1xuICBnZXQgdHJhbnNsYXRpb25Sb290KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zbGF0aW9uUm9vdDtcbiAgfVxuXG4gIHNldCB0cmFuc2xhdGlvblJvb3QodmFsdWU6IHN0cmluZykge1xuICAgIHRoaXMuX3RyYW5zbGF0aW9uUm9vdCA9IHZhbHVlIHx8ICdhc3NldHMvaTE4bic7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGh0dHA6IEh0dHBDbGllbnQsXG4gICAgQE9wdGlvbmFsKClcbiAgICBASW5qZWN0KFRSQU5TTEFURV9TRVRUSU5HUylcbiAgICBzZXR0aW5nczogVHJhbnNsYXRlU2V0dGluZ3NcbiAgKSB7XG4gICAgdGhpcy5hcHBseVNldHRpbmdzKHNldHRpbmdzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBhcHBseVNldHRpbmdzKHNldHRpbmdzOiBUcmFuc2xhdGVTZXR0aW5ncykge1xuICAgIGNvbnN0IHtcbiAgICAgIGRlYnVnTW9kZSxcbiAgICAgIGRpc2FibGVDYWNoZSxcbiAgICAgIHN1cHBvcnRlZExhbmdzLFxuICAgICAgdHJhbnNsYXRlUGF0aHMsXG4gICAgICB0cmFuc2xhdGlvblJvb3QsXG4gICAgICBhY3RpdmVMYW5nXG4gICAgfSA9IHRoaXM7XG5cbiAgICBjb25zdCBkZWZhdWx0cyA9IHtcbiAgICAgIGRlYnVnTW9kZSxcbiAgICAgIGRpc2FibGVDYWNoZSxcbiAgICAgIHN1cHBvcnRlZExhbmdzLFxuICAgICAgdHJhbnNsYXRlUGF0aHMsXG4gICAgICB0cmFuc2xhdGlvblJvb3QsXG4gICAgICBhY3RpdmVMYW5nLFxuICAgICAgLi4uc2V0dGluZ3NcbiAgICB9O1xuXG4gICAgdGhpcy5kZWJ1Z01vZGUgPSBkZWZhdWx0cy5kZWJ1Z01vZGU7XG4gICAgdGhpcy5kaXNhYmxlQ2FjaGUgPSBkZWZhdWx0cy5kaXNhYmxlQ2FjaGU7XG4gICAgdGhpcy5zdXBwb3J0ZWRMYW5ncyA9IGRlZmF1bHRzLnN1cHBvcnRlZExhbmdzO1xuICAgIHRoaXMudHJhbnNsYXRlUGF0aHMgPSBkZWZhdWx0cy50cmFuc2xhdGVQYXRocztcbiAgICB0aGlzLnRyYW5zbGF0aW9uUm9vdCA9IGRlZmF1bHRzLnRyYW5zbGF0aW9uUm9vdDtcbiAgICB0aGlzLl9hY3RpdmVMYW5nID0gZGVmYXVsdHMuYWN0aXZlTGFuZyB8fCB0aGlzLmdldEJyb3dzZXJMYW5ndWFnZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0cmFuc2xhdGVkIHN0cmluZ1xuICAgKlxuICAgKiBAcGFyYW0ga2V5IFRyYW5zbGF0aW9uIGtleVxuICAgKiBAcGFyYW0gW3BhcmFtc10gVHJhbnNsYXRpb24gcGFyYW1ldGVyc1xuICAgKiBAcGFyYW0gW2xhbmddIExhbmd1YWdlIHRvIHVzZSBmb3IgdHJhbnNsYXRpb25cbiAgICogQHJldHVybnMgVHJhbnNsYXRlZCBzdHJpbmdcbiAgICogQG1lbWJlcm9mIFRyYW5zbGF0ZVNlcnZpY2VcbiAgICovXG4gIGdldChrZXk6IHN0cmluZywgcGFyYW1zPzogVHJhbnNsYXRlUGFyYW1zLCBsYW5nPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoa2V5KSB7XG4gICAgICBsZXQgdmFsdWUgPSB0aGlzLmdldFZhbHVlKGxhbmcgfHwgdGhpcy5hY3RpdmVMYW5nLCBrZXkpO1xuICAgICAgaWYgKHZhbHVlID09PSBrZXkpIHtcbiAgICAgICAgdmFsdWUgPSB0aGlzLmdldFZhbHVlKHRoaXMuZmFsbGJhY2tMYW5nLCBrZXkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0KHZhbHVlLCBwYXJhbXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBhc3luYyBsb2FkKCk6IFByb21pc2U8YW55PiB7XG4gICAgYXdhaXQgdGhpcy51c2UodGhpcy5mYWxsYmFja0xhbmcpO1xuICAgIHJldHVybiB0aGlzLnVzZSh0aGlzLmFjdGl2ZUxhbmcpO1xuICB9XG5cbiAgLyoqXG4gICAqIExvYWQgdGhlIHRyYW5zbGF0aW9uIGZpbGUgb3IgdXNlIHByb3ZpZGVkIGRhdGEgZm9yIHRoZSBnaXZlbiBsYW5ndWFnZS5cbiAgICpcbiAgICogQHBhcmFtIGxhbmcgTGFuZ3VhZ2UgbmFtZVxuICAgKiBAcGFyYW0gW2RhdGFdIFRyYW5zbGF0aW9uIGRhdGEgdG8gdXNlXG4gICAqIEByZXR1cm5zIEZpbmFsIHRyYW5zbGF0aW9uIGRhdGEgbWVyZ2VkIHdpdGggZXhpc3RpbmcgdHJhbnNsYXRpb25zXG4gICAqIEBtZW1iZXJvZiBUcmFuc2xhdGVTZXJ2aWNlXG4gICAqL1xuICBhc3luYyB1c2UobGFuZzogc3RyaW5nLCBkYXRhPzogYW55KTogUHJvbWlzZTxhbnk+IHtcbiAgICBpZiAobGFuZyAmJiBkYXRhKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXRUcmFuc2xhdGlvbihsYW5nLCBkYXRhKTtcbiAgICB9XG5cbiAgICBsZXQgdHJhbnNsYXRpb24gPSB0aGlzLmRhdGFbbGFuZ107XG4gICAgaWYgKHRoaXMuaXNOb3RTdXBwb3J0ZWQobGFuZykpIHtcbiAgICAgIHRyYW5zbGF0aW9uID0gdGhpcy5kYXRhW3RoaXMuZmFsbGJhY2tMYW5nXTtcbiAgICB9XG5cbiAgICBpZiAodHJhbnNsYXRpb24gJiYgT2JqZWN0LmtleXModHJhbnNsYXRpb24pLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiB0cmFuc2xhdGlvbjtcbiAgICB9XG5cbiAgICBjb25zdCBmaWxlTmFtZSA9IGAke2xhbmcgfHwgdGhpcy5mYWxsYmFja0xhbmd9Lmpzb25gO1xuICAgIGNvbnN0IGZpbGVQYXRocyA9IFt0aGlzLnRyYW5zbGF0aW9uUm9vdCwgLi4uKHRoaXMudHJhbnNsYXRlUGF0aHMgfHwgW10pXTtcblxuICAgIGZvciAoY29uc3QgcGF0aCBvZiBmaWxlUGF0aHMpIHtcbiAgICAgIGNvbnN0IGZpbGVQYXRoID0gYCR7cGF0aH0vJHtmaWxlTmFtZX1gO1xuICAgICAgYXdhaXQgdGhpcy5sb2FkVHJhbnNsYXRpb24obGFuZywgZmlsZVBhdGgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmRhdGFbbGFuZ10gfHwge307XG4gIH1cblxuICBwcm90ZWN0ZWQgbG9hZFRyYW5zbGF0aW9uKGxhbmc6IHN0cmluZywgcGF0aDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2U8YW55PihyZXNvbHZlID0+IHtcbiAgICAgIGlmICh0aGlzLmRpc2FibGVDYWNoZSkge1xuICAgICAgICBwYXRoICs9IGA/dj0ke0RhdGUubm93KCl9YDtcbiAgICAgIH1cblxuICAgICAgdGhpcy5odHRwLmdldDx7fT4ocGF0aCkuc3Vic2NyaWJlKFxuICAgICAgICBqc29uID0+IHtcbiAgICAgICAgICByZXNvbHZlKHRoaXMuc2V0VHJhbnNsYXRpb24obGFuZywganNvbikpO1xuICAgICAgICB9LFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZSh0aGlzLmRhdGFbbGFuZ10gfHwge30pO1xuICAgICAgICB9XG4gICAgICApO1xuICAgIH0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIGlzTm90U3VwcG9ydGVkKGxhbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgbGFuZyAhPT0gdGhpcy5mYWxsYmFja0xhbmcgJiZcbiAgICAgIGxhbmcgIT09IHRoaXMuYWN0aXZlTGFuZyAmJlxuICAgICAgKHRoaXMuc3VwcG9ydGVkTGFuZ3MgJiZcbiAgICAgICAgdGhpcy5zdXBwb3J0ZWRMYW5ncy5sZW5ndGggPiAwICYmXG4gICAgICAgICF0aGlzLnN1cHBvcnRlZExhbmdzLmluY2x1ZGVzKGxhbmcpKVxuICAgICk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0VmFsdWUobGFuZzogc3RyaW5nLCBrZXk6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgbGV0IGRhdGEgPSB0aGlzLmRhdGFbbGFuZ107XG4gICAgaWYgKHRoaXMuaXNOb3RTdXBwb3J0ZWQobGFuZykpIHtcbiAgICAgIGRhdGEgPSB0aGlzLmRhdGFbdGhpcy5mYWxsYmFja0xhbmddO1xuICAgIH1cblxuICAgIGlmICghZGF0YSkge1xuICAgICAgcmV0dXJuIGtleTtcbiAgICB9XG5cbiAgICBjb25zdCBrZXlzID0ga2V5LnNwbGl0KCcuJyk7XG4gICAgbGV0IHByb3BLZXkgPSAnJztcblxuICAgIGRvIHtcbiAgICAgIHByb3BLZXkgKz0ga2V5cy5zaGlmdCgpO1xuICAgICAgY29uc3QgdmFsdWUgPSBkYXRhW3Byb3BLZXldO1xuICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQgJiYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgfHwgIWtleXMubGVuZ3RoKSkge1xuICAgICAgICBkYXRhID0gdmFsdWU7XG4gICAgICAgIHByb3BLZXkgPSAnJztcbiAgICAgIH0gZWxzZSBpZiAoIWtleXMubGVuZ3RoKSB7XG4gICAgICAgIGRhdGEgPSBrZXk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9wS2V5ICs9ICcuJztcbiAgICAgIH1cbiAgICB9IHdoaWxlIChrZXlzLmxlbmd0aCk7XG5cbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIHByb3RlY3RlZCBzZXRUcmFuc2xhdGlvbihsYW5nOiBzdHJpbmcsIGRhdGE6IGFueSk6IGFueSB7XG4gICAgbGV0IGZpbmFsUmVzdWx0ID0gdGhpcy5kYXRhW2xhbmddIHx8IHt9O1xuICAgIGZpbmFsUmVzdWx0ID0gdGhpcy5tZXJnZShmaW5hbFJlc3VsdCwgZGF0YSB8fCB7fSk7XG4gICAgdGhpcy5kYXRhW2xhbmddID0gZmluYWxSZXN1bHQ7XG4gICAgcmV0dXJuIGZpbmFsUmVzdWx0O1xuICB9XG5cbiAgcHJvdGVjdGVkIG1lcmdlKC4uLnRyYW5zbGF0aW9ucyk6IGFueSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG5cbiAgICB0cmFuc2xhdGlvbnMuZm9yRWFjaCh0cmFuc2xhdGlvbiA9PiB7XG4gICAgICBPYmplY3Qua2V5cyh0cmFuc2xhdGlvbikuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBpZiAoa2V5IGluIHJlc3VsdCAmJiBBcnJheS5pc0FycmF5KHJlc3VsdFtrZXldKSkge1xuICAgICAgICAgIHJlc3VsdFtrZXldID0gcmVzdWx0W2tleV0uY29uY2F0KHRyYW5zbGF0aW9uW2tleV0pO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSBpbiByZXN1bHQgJiYgdHlwZW9mIHJlc3VsdFtrZXldID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIHJlc3VsdFtrZXldID0gdGhpcy5tZXJnZShyZXN1bHRba2V5XSwgdHJhbnNsYXRpb25ba2V5XSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0W2tleV0gPSB0cmFuc2xhdGlvbltrZXldO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBwcm90ZWN0ZWQgZm9ybWF0KHN0cjogc3RyaW5nLCBwYXJhbXM6IFRyYW5zbGF0ZVBhcmFtcyk6IHN0cmluZyB7XG4gICAgbGV0IHJlc3VsdCA9IHN0cjtcblxuICAgIGlmIChwYXJhbXMpIHtcbiAgICAgIE9iamVjdC5rZXlzKHBhcmFtcykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHBhcmFtc1trZXldO1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IG5ldyBSZWdFeHAoJ3snICsga2V5ICsgJ30nLCAnZ20nKTtcblxuICAgICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSh0ZW1wbGF0ZSwgdmFsdWUpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGVidWdNb2RlKSB7XG4gICAgICByZXN1bHQgPSBgWyR7dGhpcy5hY3RpdmVMYW5nfV0gJHtyZXN1bHR9YDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBUaXRsZSB9IGZyb20gJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXInO1xuaW1wb3J0IHsgVHJhbnNsYXRlU2VydmljZSB9IGZyb20gJy4vdHJhbnNsYXRlLnNlcnZpY2UnO1xuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcbmV4cG9ydCBjbGFzcyBUaXRsZVNlcnZpY2Uge1xuICBwcml2YXRlIF90aXRsZUtleSA9ICcnO1xuXG4gIGNoYW5nZWQgPSBuZXcgU3ViamVjdDx7XG4gICAgcHJldmlvdXNWYWx1ZTogc3RyaW5nO1xuICAgIGN1cnJlbnRWYWx1ZTogc3RyaW5nO1xuICB9PigpO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgdGl0bGU6IFRpdGxlLCBwcml2YXRlIHRyYW5zbGF0ZTogVHJhbnNsYXRlU2VydmljZSkge1xuICAgIHRyYW5zbGF0ZS5hY3RpdmVMYW5nQ2hhbmdlZC5zdWJzY3JpYmUoKCkgPT4gdGhpcy5vbkxhbmd1YWdlQ2hhbmdlZCgpKTtcbiAgfVxuXG4gIGdldFRpdGxlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX3RpdGxlS2V5O1xuICB9XG5cbiAgc2V0VGl0bGUoa2V5OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBwcmV2aW91c1ZhbHVlID0gdGhpcy5fdGl0bGVLZXk7XG4gICAgY29uc3QgbmV3VmFsdWUgPSBrZXkgfHwgJyc7XG4gICAgY29uc3QgY2hhbmdlZCA9IG5ld1ZhbHVlICE9PSBwcmV2aW91c1ZhbHVlO1xuXG4gICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgIHRoaXMuX3RpdGxlS2V5ID0gbmV3VmFsdWU7XG5cbiAgICAgIGNvbnN0IHRyYW5zbGF0ZWQgPSB0aGlzLnRyYW5zbGF0ZS5nZXQobmV3VmFsdWUpO1xuICAgICAgdGhpcy50aXRsZS5zZXRUaXRsZSh0cmFuc2xhdGVkKTtcblxuICAgICAgdGhpcy5jaGFuZ2VkLm5leHQoe1xuICAgICAgICBwcmV2aW91c1ZhbHVlOiBwcmV2aW91c1ZhbHVlLFxuICAgICAgICBjdXJyZW50VmFsdWU6IG5ld1ZhbHVlXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIG9uTGFuZ3VhZ2VDaGFuZ2VkKCkge1xuICAgIGlmICh0aGlzLl90aXRsZUtleSkge1xuICAgICAgY29uc3QgdHJhbnNsYXRlZCA9IHRoaXMudHJhbnNsYXRlLmdldCh0aGlzLl90aXRsZUtleSk7XG4gICAgICB0aGlzLnRpdGxlLnNldFRpdGxlKHRyYW5zbGF0ZWQpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgUGlwZSwgUGlwZVRyYW5zZm9ybSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgVHJhbnNsYXRlU2VydmljZSwgVHJhbnNsYXRlUGFyYW1zIH0gZnJvbSAnLi90cmFuc2xhdGUuc2VydmljZSc7XG5cbkBQaXBlKHtcbiAgbmFtZTogJ3RyYW5zbGF0ZScsXG4gIHB1cmU6IGZhbHNlXG59KVxuZXhwb3J0IGNsYXNzIFRyYW5zbGF0ZVBpcGUgaW1wbGVtZW50cyBQaXBlVHJhbnNmb3JtIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSB0cmFuc2xhdGU6IFRyYW5zbGF0ZVNlcnZpY2UpIHt9XG5cbiAgdHJhbnNmb3JtKGtleTogc3RyaW5nLCBwYXJhbXM/OiBUcmFuc2xhdGVQYXJhbXMpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLnRyYW5zbGF0ZS5nZXQoa2V5LCBwYXJhbXMpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSwgTW9kdWxlV2l0aFByb3ZpZGVycyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IEh0dHBDbGllbnRNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBUcmFuc2xhdGVTZXJ2aWNlLCBUUkFOU0xBVEVfU0VUVElOR1MgfSBmcm9tICcuL3RyYW5zbGF0ZS5zZXJ2aWNlJztcbmltcG9ydCB7IFRyYW5zbGF0ZVBpcGUgfSBmcm9tICcuL3RyYW5zbGF0ZS5waXBlJztcbmltcG9ydCB7IFRpdGxlU2VydmljZSB9IGZyb20gJy4vdGl0bGUuc2VydmljZSc7XG5pbXBvcnQgeyBUcmFuc2xhdGVTZXR0aW5ncyB9IGZyb20gJy4vdHJhbnNsYXRlLnNldHRpbmdzJztcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW0NvbW1vbk1vZHVsZSwgSHR0cENsaWVudE1vZHVsZV0sXG4gIGRlY2xhcmF0aW9uczogW1RyYW5zbGF0ZVBpcGVdLFxuICBleHBvcnRzOiBbVHJhbnNsYXRlUGlwZV1cbn0pXG5leHBvcnQgY2xhc3MgVHJhbnNsYXRlTW9kdWxlIHtcbiAgc3RhdGljIGZvclJvb3Qoc2V0dGluZ3M/OiBUcmFuc2xhdGVTZXR0aW5ncyk6IE1vZHVsZVdpdGhQcm92aWRlcnMge1xuICAgIHJldHVybiB7XG4gICAgICBuZ01vZHVsZTogVHJhbnNsYXRlTW9kdWxlLFxuICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIHsgcHJvdmlkZTogVFJBTlNMQVRFX1NFVFRJTkdTLCB1c2VWYWx1ZTogc2V0dGluZ3MgfSxcbiAgICAgICAgVHJhbnNsYXRlU2VydmljZSxcbiAgICAgICAgVGl0bGVTZXJ2aWNlXG4gICAgICBdXG4gICAgfTtcbiAgfVxuXG4gIHN0YXRpYyBmb3JDaGlsZCgpOiBNb2R1bGVXaXRoUHJvdmlkZXJzIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmdNb2R1bGU6IFRyYW5zbGF0ZU1vZHVsZVxuICAgIH07XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJ0c2xpYl8xLl9fdmFsdWVzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFVQSxJQUFhLGtCQUFrQixHQUFHLElBQUksY0FBYyxDQUNsRCxvQkFBb0IsQ0FDckI7O0lBK0dDLDBCQUNVLElBQWdCLEVBR3hCLFFBQTJCO1FBSG5CLFNBQUksR0FBSixJQUFJLENBQVk7UUF0R2hCLFNBQUksR0FBMkIsRUFBRSxDQUFDO1FBQ3BDLGtCQUFhLEdBQUcsSUFBSSxDQUFDO1FBRXJCLHFCQUFnQixHQUFHLGFBQWEsQ0FBQzs7OztRQUt6QyxzQkFBaUIsR0FBRyxJQUFJLFlBQVksRUFHaEMsQ0FBQzs7Ozs7OztRQVFMLGNBQVMsR0FBRyxLQUFLLENBQUM7Ozs7OztRQU9sQixpQkFBWSxHQUFHLEtBQUssQ0FBQzs7Ozs7Ozs7OztRQVdyQixtQkFBYyxHQUFhLEVBQUUsQ0FBQzs7Ozs7OztRQVE5QixtQkFBYyxHQUFhLEVBQUUsQ0FBQztRQThENUIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENB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